<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Approval Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-8 text-gray-800">Pending Approvals</h1>
        
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <table class="min-w-full leading-normal">
                <thead>
                    <tr>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Invoice ID
                        </th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Vendor
                        </th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Date
                        </th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Amount
                        </th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Risk Score
                        </th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Actions
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {% for invoice in invoices %}
                    <tr>
                        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                            <a href="/ui/invoices/{{ invoice.invoice_id }}" class="text-blue-500 hover:text-blue-800">
                                {{ invoice.invoice_id }}
                            </a>
                        </td>
                        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                            {{ invoice.data.vendor_name if invoice.data else 'N/A' }}
                        </td>
                        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                            {{ invoice.data.invoice_date.strftime('%Y-%m-%d') if invoice.data else '' }}
                        </td>
                        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm font-bold">
                            {{ "%.2f"|format(invoice.data.total) if invoice.data else '0.00' }} {{ invoice.data.currency if invoice.data else '' }}
                        </td>
                        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                            {% set risk = invoice.validation.fraud_score if invoice.validation else 0 %}
                            <span class="relative inline-block px-3 py-1 font-semibold leading-tight text-{{ 'red' if risk > 0.5 else 'green' }}-900">
                                <span aria-hidden="true" class="absolute inset-0 bg-{{ 'red' if risk > 0.5 else 'green' }}-200 opacity-50 rounded-full"></span>
                                <span class="relative">{{ "%.2f"|format(risk) }}</span>
                            </span>
                        </td>
                        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                            <a href="/ui/invoices/{{ invoice.invoice_id }}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded">
                                Review
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                    
                    {% if not invoices %}
                    <tr>
                        <td colspan="6" class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-center">
                            No pending approvals found.
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
